## 11. Seguridad y Endurecimiento (Hardening)

### 11.1 Firewall y SELinux

**Firewall:** controla el tráfico entrante y saliente del sistema.

```bash
firewall-cmd --add-service=http --permanent
firewall-cmd --reload
```

**Explicación:** agrega el servicio HTTP (puerto 80) de forma permanente y recarga la configuración.

**SELinux (Security-Enhanced Linux):** mecanismo de control de acceso obligatorio (MAC) que restringe acciones de procesos.

```bash
getenforce
setenforce 1
```

* `getenforce` muestra el modo actual.
* `setenforce 1` activa el modo *enforcing* temporalmente.

Editar configuración permanente:

```bash
vim /etc/selinux/config
```

```
SELINUX=enforcing
```

---

### 11.2 SSH Seguro

La configuración segura de SSH evita accesos no autorizados.

```bash
vim /etc/ssh/sshd_config
PermitRootLogin no
PasswordAuthentication no
Port 2222
systemctl restart sshd
```

**Explicación:**

* Desactiva el inicio de sesión directo de root.
* Obliga al uso de autenticación por clave pública.
* Cambia el puerto de escucha para reducir ataques automatizados.

**Ejemplo:** Generar claves y copiar al servidor.

```bash
ssh-keygen -t rsa -b 4096
ssh-copy-id usuario@servidor
```

---

### 11.3 Auditoría

#### Listar reglas activas

```bash
auditctl -l
```

#### Reporte de autenticaciones

```bash
aureport -au
```

#### Resumen de llamadas al sistema

```bash
ausyscall --summary
```

**Uso práctico:** detectar intentos de acceso fallidos o modificaciones a archivos críticos.
